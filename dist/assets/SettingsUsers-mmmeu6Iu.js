import{r as d,s as A,t as l,j as e,S as z,B as F,C as O,X as B}from"./index-BCta2iwk.js";import{C as I}from"./card-x1ywVH_7.js";import{u as V,t as k,F as $,a as P,b as S,d as C,e as y,z as v}from"./zod-D9tdBR2H.js";import{I as E}from"./input-mh7JJ6NP.js";import{S as L,a as _,b as D,c as M,d as X}from"./select-CD5XDIEa.js";import{S as i}from"./settings.config-DOL1Dw22.js";import{S as j}from"./settings.services-CjmHj3Qp.js";import{r as q,a as G}from"./rowsPerPage.schema-DlMmO0pf.js";import{T as H}from"./trash-2-Fv-IyTXX.js";import{P as T}from"./plus-PRqGeHHI.js";import{R as U}from"./roles.services-DDusMnZx.js";import{u as J}from"./useCapitalize-CH2_f9x0.js";import{P as K}from"./pencil-DLwvTUIk.js";import"./label-D3hEH840.js";import"./index-BAguUWrr.js";function Q(){const[u,g]=d.useState({}),[x,m]=d.useState(""),[p,b]=d.useState({}),[r,h]=d.useState([]),R=A(t=>t.setRowsPerPageUsers),N=V({resolver:k(q),defaultValues:{value:0}});d.useEffect(()=>{j.findOne("rowsPerPageUsers").then(t=>{t.id&&(N.setValue("value",t.value),g(t),m(t.value)),t.statusCode>399&&l({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&l({title:"Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3})}),s()},[N]);function s(){j.findOne("rowsPerPageOptionsUsers").then(t=>{t.value?(t.value=t.value.split(","),t.value=t.value.map(a=>Number(a))):t.value=[],b(t),h(t.value)})}function f(t){j.update(u.id,t).then(a=>{a.statusCode===200&&(g({...u,value:t}),R(Number(t)),l({title:a.statusCode,description:a.message,variant:"success",duration:5e3})),a.statusCode>399&&l({title:a.statusCode,description:a.message,variant:"destructive",duration:5e3}),a instanceof Error&&l({title:"Error",description:"500 Internal Server Error | "+a.message,variant:"destructive",duration:5e3})})}function n(t){const a=[...r],o=a.indexOf(t);o!==-1&&a.splice(o,1),j.update(p.id,a.join(",")).then(c=>{c.statusCode===200&&h(a),c.statusCode>399&&l({title:c.statusCode,description:c.message,variant:"destructive",duration:5e3}),c instanceof Error&&l({title:"Error",description:"500 Internal Server Error | "+c.message,variant:"destructive",duration:5e3})})}const w=V({resolver:k(G),defaultValues:{value:0}});function W(t){const a=[...r,Number(t.value)];a.sort(function(o,c){return o-c}),j.update(p.id,a.join(",")).then(o=>{o.statusCode===200&&(h(a),w.reset()),o.statusCode>399&&l({title:o.statusCode,description:o.message,variant:"destructive",duration:5e3}),o instanceof Error&&l({title:"Error",description:"500 Internal Server Error | "+o.message,variant:"destructive",duration:5e3})})}return e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"mb-2"}),e.jsx("span",{className:"text-base font-medium text-slate-500",children:i.sections.rowsPerPage.title}),e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"grid space-y-2",children:[e.jsxs("span",{className:"flex flex-row text-sm text-slate-500 items-center",children:[i.sections.rowsPerPage.subtitle1,e.jsx("span",{className:"font-semibold text-base pl-2",children:u.value})]}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsxs(L,{value:x,onValueChange:t=>m(t),children:[e.jsx(_,{className:"h-8 w-[100px]",children:e.jsx(D,{placeholder:x})}),e.jsx(M,{children:r.length>1?r.map(t=>e.jsx(X,{value:String(t),children:t},t)):e.jsx(e.Fragment,{children:i.common.no_data})})]}),e.jsxs(F,{onClick:()=>f(x),variant:"outline",size:"sm",className:"h-8 gap-2 border border-slate-300 bg-slate-300/50 p-2 text-xs text-slate-400 hover:border-slate-400/50 hover:bg-slate-300 hover:text-slate-500",children:[e.jsx(O,{className:"h-3 w-3",strokeWidth:"2"}),i.buttons.save]})]})]})}),e.jsxs("div",{className:"grid space-y-2 py-2",children:[e.jsx("div",{className:"text-base font-medium text-slate-500",children:i.sections.rowsPerPage.subtitle2}),e.jsx(I,{className:"px-4",children:e.jsx("ul",{className:"space-y-1 py-4 text-sm text-slate-700",children:r.length>0?r.map((t,a)=>e.jsxs("li",{className:`flex w-28 items-center justify-between rounded-md p-1 ${a%2===0?"bg-slate-100/60":""}`,children:[e.jsx("div",{className:"w-8 font-medium text-slate-800",children:t}),e.jsx("button",{onClick:()=>n(t),className:"flex h-7 w-7 items-center justify-center rounded-md border border-slate-300 bg-slate-300/50 p-1 text-slate-400 transition-all hover:border-slate-400/50 hover:bg-slate-200/50 hover:text-red-500",children:e.jsx(H,{className:"h-4 w-4"})})]},t)):e.jsx(e.Fragment,{children:i.common.no_data})})}),e.jsx("div",{className:"flex flex-row space-x-4 py-2",children:e.jsx($,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(W),className:"flex flex-row items-center space-x-4",children:[e.jsx(T,{className:"rounded-full border bg-white p-1"}),e.jsx(P,{control:w.control,name:"value",render:({field:t})=>e.jsxs(S,{className:"",children:[e.jsx(C,{children:e.jsx(E,{...t,type:"number",className:"h-8 w-20"})}),e.jsx(y,{className:"text-xs font-light"})]})}),e.jsxs(F,{type:"submit",variant:"outline",size:"sm",className:"h-8 gap-2 border border-slate-300 bg-slate-300/50 p-2 text-xs text-slate-400 hover:border-slate-400/50 hover:bg-slate-300 hover:text-slate-500",children:[e.jsx(O,{className:"h-3 w-3",strokeWidth:"2"}),i.buttons.save]})]})})})]})]})}const Y=v.object({id:v.coerce.number(),name:v.string().min(1,{message:"El nombre no puede estar vacío"}),title:v.string().min(1,{message:"El título no puede estar vacío"}),value:v.string().min(1,{message:"El valor no puede estar vacío"})});function Z(){const[u,g]=d.useState([]),[x,m]=d.useState(!1),p=J();d.useEffect(()=>{b()},[]);async function b(){U.findAll().then(s=>{s.length>0&&g(s),s.statusCode>399&&l({title:s.statusCode,description:s.message,variant:"success",duration:5e3}),s instanceof Error&&l({title:"Error",description:"500 Internal Server Error | "+s.message,variant:"destructive",duration:5e3})})}const r=V({resolver:k(Y),defaultValues:{id:0,name:"",title:"",value:""}});function h(s){r.setValue("id",s.id),r.setValue("name",s.name),r.setValue("title",s.title),r.setValue("value",s.value),m(!0)}function R(s){const f={name:s.name.trim().toUpperCase(),title:s.title.trim().toLowerCase(),value:s.value.trim().toLowerCase()};U.update(s.id,f).then(n=>{n.statusCode===200&&(l({title:n.statusCode,description:n.message,variant:"success",duration:5e3}),b(),r.reset(),m(!1)),n.statusCode>399&&l({title:n.statusCode,description:n.message,variant:"destructive",duration:5e3}),n instanceof Error&&l({title:"Error",description:"500 Internal Server Error | "+n.message,variant:"destructive",duration:5e3})})}function N(){r.reset(),m(!1)}return e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"mb-2"}),e.jsx("span",{className:"text-base font-medium text-slate-500",children:i.sections.roles.title}),e.jsx(I,{className:"px-4",children:e.jsx("ul",{className:"space-y-1 py-4 text-sm text-slate-700",children:u.map((s,f)=>e.jsxs("li",{className:`flex items-center justify-between rounded-md p-1 ${f%2===0?"bg-slate-100/60":""}`,children:[e.jsxs("div",{className:"space-x-2 font-medium",children:[e.jsx("span",{className:"text-sm text-slate-800",children:p(s.title)}),e.jsx("span",{className:"text-xs text-slate-500",children:`(${s.value} - ${s.name})`})]}),e.jsx("button",{onClick:()=>h(s),className:"flex h-7 w-7 items-center justify-center rounded-md border border-slate-300 bg-slate-300/50 p-1 text-slate-400 transition-all hover:border-slate-400/50 hover:bg-slate-200/50 hover:text-green-500",children:e.jsx(K,{className:"h-4 w-4"})})]},s.id))})}),x&&e.jsx($,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(R),className:"grid items-center space-y-4 py-2",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-4",children:[e.jsx(T,{className:"rounded-full border bg-white p-1"}),e.jsx(P,{control:r.control,name:"title",render:({field:s})=>e.jsxs(S,{className:"w-1/2",children:[e.jsx(C,{children:e.jsx(E,{...s,type:"text",placeholder:i.common.title,className:"h-8"})}),e.jsx(y,{className:"text-xs font-light"})]})}),e.jsx(P,{control:r.control,name:"value",render:({field:s})=>e.jsxs(S,{className:"w-1/2",children:[e.jsx(C,{children:e.jsx(E,{...s,type:"text",placeholder:i.common.value,className:"h-8"})}),e.jsx(y,{className:"text-xs font-light"})]})})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-4",children:[e.jsx("span",{className:"w-6 p-1"}),e.jsx(P,{control:r.control,name:"name",render:({field:s})=>e.jsxs(S,{className:"w-1/2",children:[e.jsx(C,{children:e.jsx(E,{...s,type:"text",placeholder:i.common.name,className:"h-8"})}),e.jsx(y,{className:"text-xs font-light"})]})}),e.jsxs("div",{className:"flex w-1/2 justify-end space-x-2",children:[e.jsx(F,{onClick:N,variant:"ghost",size:"sm",className:"h-8 gap-2 border border-slate-300 bg-slate-300/50 p-2 text-slate-400 hover:border-slate-400/50 hover:bg-slate-300 hover:text-slate-500",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsxs(F,{type:"submit",variant:"ghost",size:"sm",className:"h-8 gap-2 border border-slate-300 bg-slate-300/50 p-2 text-slate-400 hover:border-slate-400/50 hover:bg-slate-300 hover:text-slate-500",children:[e.jsx(O,{className:"h-3 w-3",strokeWidth:"2"}),e.jsx("span",{className:"text-xs",children:i.buttons.save})]})]})]})]})})]})}function fe(){return e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:gap-6",children:[e.jsx("div",{className:"w-full p-2 md:w-1/2",children:e.jsx("div",{className:"space-y-4",children:e.jsx(Z,{})})}),e.jsx("div",{className:"w-full p-2 md:w-1/2",children:e.jsx("div",{className:"space-y-4",children:e.jsx(Q,{})})})]})}export{fe as default};
