import{r as u,b as V,u as L,j as e,B as j,L as k,C as z,t as o,U as w}from"./index-BCta2iwk.js";import{C as A,d as B}from"./card-x1ywVH_7.js";import{u as P,f as $,a as n,b as c,c as d,d as m,e as x,t as K}from"./zod-D9tdBR2H.js";import{I as f}from"./input-mh7JJ6NP.js";import{S as M,a as T,b as D,c as O,d as _}from"./select-CD5XDIEa.js";import{U as l,B as p}from"./users.config-Dva0wEUX.js";import{R as q}from"./roles.services-DDusMnZx.js";import{a as G}from"./user.schema-B3_XLE-d.js";import{u as H}from"./useCapitalize-CH2_f9x0.js";import{A as J}from"./arrow-left-CIgR4B0O.js";import"./label-D3hEH840.js";import"./index-BAguUWrr.js";const v="/app";function oe(){const[C,N]=u.useState({}),[S,b]=u.useState(0),[E,U]=u.useState([]),{id:y}=V(),g=L(),h=Number(y),F=H(),t=P({resolver:K(G),values:{name:"",email:"",password:"",phone:"",role:""}});u.useEffect(()=>{function s(){q.findAll().then(i=>{i.length>0&&U(i),i.statusCode>399&&o({title:i.statusCode,description:i.message,variant:"destructive",duration:5e3}),i instanceof Error&&o({title:"Error",description:"500 Internal Server Error | "+i.message,variant:"destructive",duration:5e3})})}function a(i){w.findOne(i).then(r=>{r.id>0&&(N(r),t.setValue("name",r.name),t.setValue("email",r.email),t.setValue("phone",r.phone),t.setValue("phone",r.phone),t.setValue("role",r.role),b(Math.random())),r.statusCode>399&&o({title:r.statusCode,description:r.message,variant:"destructive",duration:5e3}),r instanceof Error&&o({title:"Error",description:"500 Internal Server Error | "+r.message,variant:"destructive",duration:5e3})})}s(),a(h)},[t,h]);function I(s){s.password===""&&(s.password=C.password),w.update(h,s).then(a=>{a.statusCode===200&&(o({title:a.statusCode,description:a.message,variant:"success",duration:5e3}),g(`${v}/usuarios`)),a.statusCode>399&&o({title:a.statusCode,description:a.message,variant:"destructive",duration:5e3}),a instanceof Error&&o({title:"Error",description:"500 Internal Server Error | "+a.message,variant:"destructive",duration:5e3})})}function R(s){s.preventDefault(),g(`${v}/usuarios`)}return e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between px-8 pt-8",children:[e.jsx("h1",{className:"text-2xl font-normal text-slate-600",children:l.pages.updateUserTitle}),e.jsx(j,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(k,{to:`${v}/usuarios`,children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),p.actions.back]})})]}),e.jsx("div",{className:"flex flex-row items-center justify-center px-6 pt-8",children:e.jsx(A,{className:"mb-8 w-full pt-6 md:w-[550px] lg:w-[550px]",children:e.jsx(B,{className:"mx-0 px-0",children:e.jsx($,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(I),className:"space-y-8",children:[e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"flex flex-col justify-between md:flex-row md:gap-10 lg:flex-row lg:gap-10",children:[e.jsxs("div",{className:"flex w-full flex-col md:w-1/2 lg:w-1/2",children:[e.jsx(n,{control:t.control,name:"name",render:({field:s})=>e.jsxs(c,{className:"mb-4",children:[e.jsx(d,{children:l.form.name.title}),e.jsx(m,{children:e.jsx(f,{placeholder:l.form.name.placeholder,...s})}),e.jsx(x,{})]})}),e.jsx(n,{control:t.control,name:"email",render:({field:s})=>e.jsxs(c,{className:"mb-4",children:[e.jsx(d,{children:l.form.email.title}),e.jsx(m,{children:e.jsx(f,{placeholder:l.form.email.placeholder,...s})}),e.jsx(x,{})]})}),e.jsx(n,{control:t.control,name:"password",render:({field:s})=>e.jsxs(c,{className:"mb-4",children:[e.jsx(d,{children:l.form.password.title}),e.jsx(m,{children:e.jsx(f,{placeholder:l.form.password.placeholder,...s})}),e.jsx(x,{})]})})]}),e.jsxs("div",{className:"flex w-full flex-col md:w-1/2 lg:w-1/2",children:[e.jsx(n,{control:t.control,name:"phone",render:({field:s})=>e.jsxs(c,{className:"mb-4",children:[e.jsx(d,{children:l.form.phone.title}),e.jsx(m,{children:e.jsx(f,{placeholder:l.form.phone.placeholder,...s})}),e.jsx(x,{})]})}),e.jsx(n,{control:t.control,name:"role",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:l.form.role.title}),e.jsxs(M,{value:s.value,onValueChange:a=>s.onChange(a),children:[e.jsx(m,{children:e.jsx(T,{children:e.jsx(D,{placeholder:e.jsx("span",{className:"text-muted-foreground",children:l.form.role.placeholder})})})}),e.jsx(O,{children:E.map(a=>e.jsx(_,{value:a.value,children:F(a.title)},a.id))})]},S),e.jsx(x,{})]})})]})]})}),e.jsx("div",{className:"flex flex-row items-center justify-end pr-6",children:e.jsxs("div",{className:"flex",children:[e.jsx(j,{variant:"ghost",className:"mr-4",onClick:R,children:p.actions.cancel}),e.jsxs(j,{type:"submit",variant:"default",size:"default",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),p.actions.save]})]})})]})})})})})]})}export{oe as default};
