import{c as M,j as e,r as n,v as H,b as W,u as X,B as x,s as Z,R as q,t as r}from"./index-BCta2iwk.js";import{C as G,a as J,b as K,c as Q,d as Y,e as ee}from"./card-x1ywVH_7.js";import{D as P,a as L,b as te,c as se,d as ae,e as ie}from"./dialog-Cbf9pZRL.js";import{L as re}from"./label-D3hEH840.js";import{g as z,S as le,I as ne}from"./image.services-CrBS0_lZ.js";import{a as de,M as oe,C as ce,T as b,b as w,c as N,d as y}from"./FavButton-CuxTAiDO.js";import{C as me}from"./chevron-left-By3v_zgh.js";import{P as j}from"./products.services-ClCANeLJ.js";import{u as xe}from"./useCapitalize-CH2_f9x0.js";import{C as he,u as ue}from"./useLocaleDate-D4D90Shb.js";import{A as fe}from"./arrow-left-CIgR4B0O.js";import{P as ve}from"./pencil-DLwvTUIk.js";import{T as je}from"./trash-2-Fv-IyTXX.js";import{C as ge}from"./circle-check-big-Bq8s_kx7.js";import{B as pe}from"./badge-x-BzcLBOcs.js";import"./index-BAguUWrr.js";/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=M("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=M("Mailbox",[["path",{d:"M22 17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.5C2 7 4 5 6.5 5H18c2.2 0 4 1.8 4 4v8Z",key:"1lbycx"}],["polyline",{points:"15,9 18,9 18,11",key:"1pm9c0"}],["path",{d:"M6.5 5C9 5 11 7 11 9.5V17a2 2 0 0 1-2 2v0",key:"n6nfvi"}],["line",{x1:"6",x2:"7",y1:"10",y2:"10",key:"1e2scm"}]]);function we({width:l=24,height:o=24,dur:v="0.75",color:u}){return e.jsx("svg",{width:l,height:o,fill:u,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z",children:e.jsx("animateTransform",{attributeName:"transform",type:"rotate",dur:v,values:"0 12 12;360 12 12",repeatCount:"indefinite"})})})}function Ne(l){const o=l.images,v=l.autoSlide||!1,u=l.autoSlideInterval||3e3,[E,g]=n.useState(!0),[S,p]=n.useState(!1),[c,s]=n.useState(0),k=()=>s(d=>d===0?o.length-1:d-1),m=()=>s(d=>d===o.length-1?0:d+1);return n.useEffect(()=>{if(!v)return;const d=setInterval(m,u);return()=>clearInterval(d)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex aspect-[83/50]",children:[E&&e.jsx("div",{className:"mx-auto flex h-auto w-auto flex-row items-center",children:e.jsx(we,{width:36,height:36,dur:.75,color:"#0ea5e9"})}),e.jsxs("div",{className:"relative overflow-hidden rounded-xl shadow-md",children:[e.jsx("div",{className:"flex transition-transform duration-500 ease-out",style:{transform:`translateX(-${c*100}%)`},children:o.map((d,f)=>e.jsx("img",{src:z(d.name),onLoad:()=>g(!1)},f))}),o.length>1&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between p-4",children:[e.jsx("button",{onClick:k,className:"rounded-full bg-white/70 p-1 text-gray-800 shadow hover:bg-white",children:e.jsx(me,{size:25})}),e.jsx("button",{onClick:m,className:"rounded-full bg-white/70 p-1 text-gray-800 shadow hover:bg-white",children:e.jsx(H,{size:25})})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:o.map((d,f)=>e.jsx("div",{className:`h-2 w-2 rounded-full bg-white transition-all ${c===f?"p-1.5":"bg-opacity-50"}`},f))})}),e.jsx("div",{className:"absolute inset-0 flex h-fit w-auto justify-end p-4",children:e.jsx("button",{onClick:()=>p(!0),className:"place-items-center rounded-full bg-white/70 p-1 text-gray-800 shadow hover:bg-white/100",children:e.jsx(Ce,{size:25,strokeWidth:1.5})})})]})]}),e.jsx(P,{open:S,onOpenChange:p,children:e.jsx(L,{className:"max-w-4xl border-none p-0",children:e.jsx("img",{className:"rounded-lg",src:z(o[c].name)})})})]})}const A="/app";function Re(){var $;const l=Number(W().id),[o,v]=n.useState(!1),[u,E]=n.useState(""),[g,S]=n.useState([]),[p,c]=n.useState(!1),[s,k]=n.useState({}),[m,d]=n.useState({id:0,name:"",title:"",subtitle:"",message:e.jsx("span",{})}),[f,T]=n.useState(!1),[_,F]=n.useState(0),O=xe(),D=ue(),C=X();n.useEffect(()=>{async function a(h){j.findOne(h).then(i=>{i.id&&(k(i),v(i.is_active),T(!0)),i.statusCode>399&&r({title:i.statusCode,description:i.message,variant:"destructive",duration:5e3}),i instanceof Error&&r({title:"1 Error",description:"500 Internal Server Error | "+i.message,variant:"destructive",duration:5e3})})}async function t(h){ne.findByProperty(h).then(i=>{i.length>0&&S(i),i.statusCode>399&&r({title:i.statusCode,description:i.message,variant:"destructive",duration:5e3}),i instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+i.message,variant:"destructive",duration:5e3})})}a(l),t(l)},[l,_]);function I(a,t){let h=!1,i="";t==="removeSoft"&&(i="Esta acción es posible de revertir por el administrador",h=e.jsxs(e.Fragment,{children:["La propiedad ",e.jsx("span",{className:"text-md font-bold text-slate-900",children:a.id<10?`COD/0${a.id}`:`COD/${a.id}`})," va a ser eliminada de la base de datos."]})),t==="remove"&&(i="Esta acción es imposible de revertir.",h=e.jsxs(e.Fragment,{children:["La propiedad ",e.jsx("span",{className:"text-md font-bold text-slate-900",children:a.id<10?`COD/0${a.id}`:`COD/${a.id}`})," va a ser eliminada permanentemente de la base de datos."]})),t==="restore"&&(i="Esta acción es posible de revertir por el administrador",h=e.jsxs(e.Fragment,{children:["La propiedad ",e.jsx("span",{className:"text-md font-bold text-slate-900",children:a.id<10?`COD/0${a.id}`:`COD/${a.id}`})," va a ser restaurada de la base de datos."]})),c(!0),d({id:Number(a.id),name:a.title,title:"¿Estás realmente seguro?",subtitle:i,message:h}),E(t)}async function R(a){j.restore(a).then(t=>{t.statusCode===200&&r({title:t.statusCode,description:t.message,variant:"success",duration:5e3}),t.statusCode>399&&r({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3}),c(!1),F(Math.random())})}async function B(a){j.removeSoft(a).then(t=>{t.statusCode===200&&(C(-1),r({title:t.statusCode,description:t.message,variant:"success",duration:5e3})),t.statusCode>399&&r({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&r({title:"2 Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3}),c(!1)})}async function V(a){j.remove(a).then(t=>{t.statusCode===200&&(C(`${A}/productos`),r({title:t.statusCode,description:t.message,variant:"success",duration:5e3})),t.statusCode>399&&r({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3}),c(!1)})}function U(a){j.switchActive(l,a).then(t=>{t.statusCode===200&&r({title:t.statusCode,description:t.message,variant:"success",duration:5e3}),t.statusCode>399&&r({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3})})}return e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"mx-6 mb-4 mt-6 flex flex-row items-center justify-end",children:e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>C(-1),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Volver"]})}),e.jsx("div",{className:"mt-6 flex min-w-80 flex-col items-center mx-8",children:f&&e.jsxs(G,{className:"relative mb-8 min-w-[350px] overflow-hidden border-t-[4px] md:w-[500px]",style:{borderTopColor:s.color},children:[s.deletedAt!==null&&e.jsx("div",{className:"absolute right-[-35px] top-[32px] w-[170px] rotate-45 transform bg-red-500 py-1 text-center font-semibold text-white",children:"Eliminado"}),e.jsxs(J,{className:"flex-grow rounded-sm p-6",children:[e.jsxs("div",{className:"flex text-sm font-bold uppercase text-slate-500 justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex w-auto flex-row items-center rounded-sm border bg-slate-200/70 px-2 py-1 leading-tight",children:l<10?"Cod/0"+l:"Cod/"+l}),e.jsx("div",{children:s.type})]}),e.jsx(de,{property:s,height:30})]}),e.jsx(K,{className:"pt-4 text-xl text-slate-800",children:s.title}),e.jsx(Q,{className:"text-sm",children:s.short_description})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"text-sm",children:s.long_description}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 py-1 text-sm",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:`Ubicado en ${s.street}, ${s.city}, ${s.state}`})]}),e.jsxs("div",{className:"flex items-center space-x-2 py-1 text-sm",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:`Creado por ${($=s.user)==null?void 0:$.name}, el ${D(s.created_at)}`})]}),e.jsxs("div",{className:"flex items-center space-x-2 py-1 text-sm",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx("span",{children:`${s.zip}`})]})]}),e.jsxs("div",{className:"flex flex-row items-center justify-end space-x-4 py-4 text-lg font-semibold text-slate-700",children:[e.jsx("div",{className:"tracking-tight",children:O(s.business_type)}),e.jsx(ce,{value:s.price,locale:"es-AR",digits:0,className:""})]}),g.length>0&&e.jsx("div",{className:"mb-4 flex",children:e.jsx(Ne,{images:g})}),e.jsxs("div",{className:"flex flex-row items-center pt-2 text-sm text-slate-400",children:["Última actualización realizada el ",D(s.updated_at)]})]}),e.jsxs(ee,{className:"mt-auto justify-between bg-slate-200/50 p-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"is_active",defaultChecked:o,onCheckedChange:a=>U(a),className:"h-5 w-11 data-[state=checked]:bg-emerald-300 data-[state=unchecked]:bg-input [&_*]:h-4 [&_*]:w-4 [&_*]:data-[state=checked]:translate-x-6"},+new Date),e.jsx(re,{className:"text-slate-400/70",children:"Activo"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(N,{asChild:!0,children:e.jsx(x,{onClick:()=>C(`${A}/productos/modificar/${s.id}`),variant:"ghost",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-emerald-500",children:e.jsx(ve,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:"Editar"})})]})}),s.deletedAt===null?e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(N,{asChild:!0,children:e.jsx(x,{onClick:()=>I(s,"removeSoft"),variant:"outline",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-rose-400",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:"Eliminar"})})]})}):e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(N,{asChild:!0,children:e.jsx(x,{onClick:()=>I(s,"restore"),variant:"outline",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-emerald-400",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:"Restaurar"})})]})}),Z.getState().role===q.ADMIN&&e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(N,{asChild:!0,children:e.jsx(x,{onClick:()=>I(s,"remove"),variant:"outline",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-rose-400",children:e.jsx(pe,{className:"h-5 w-5",strokeWidth:"1.5"})})}),e.jsx(y,{children:e.jsx("p",{children:"Eliminar permanente"})})]})})]})]})]})}),e.jsx(P,{open:p,onOpenChange:c,children:e.jsxs(L,{children:[e.jsxs(te,{children:[e.jsx(se,{children:m.title}),e.jsx(ae,{children:m.subtitle})]}),e.jsx("section",{className:"text-sm font-normal",children:m.message}),e.jsx(ie,{children:e.jsxs("div",{className:"mt-6 flex flex-row gap-4",children:[e.jsx(x,{variant:"ghost",onClick:()=>c(!1),children:"Cancelar"}),u==="removeSoft"&&e.jsx(x,{variant:"delete",onClick:()=>B(m.id),children:"Eliminar"}),u==="restore"&&e.jsx(x,{variant:"default",onClick:()=>R(m.id),children:"Restaurar"}),u==="remove"&&e.jsx(x,{variant:"delete",onClick:()=>V(m.id),children:"Eliminar"})]})})]})})]})}export{Re as default};
