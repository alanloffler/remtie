import{c as k,r as d,b as R,e as y,j as e,u as $,U as C,t as r,B as n,D as z,s as p,R as D}from"./index-BCta2iwk.js";import{C as B,d as L,e as M}from"./card-x1ywVH_7.js";import{D as P,a as F,b as O,c as T,d as Y,e as q}from"./dialog-Cbf9pZRL.js";import{B as u,U as c}from"./users.config-Dva0wEUX.js";import{R as H}from"./roles.services-DDusMnZx.js";import{u as V}from"./useCapitalize-CH2_f9x0.js";import{A as W}from"./arrow-left-CIgR4B0O.js";import{P as X}from"./pencil-DLwvTUIk.js";import{T as _}from"./trash-2-Fv-IyTXX.js";import{C as G}from"./circle-check-big-Bq8s_kx7.js";import{B as J}from"./badge-x-BzcLBOcs.js";/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=k("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=k("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);function Z(m,x){const[h,N]=d.useState({}),i=V();let f="";if(d.useEffect(()=>{H.findAll().then(b=>{b.find(l=>{m===l.value&&N(l)})})},[m]),!x||!m)return;const o=new Date(x),a=navigator.language.split("-")[0];return a==="es"&&(f=`
            ${i(h.title)} desde el 
            ${o.getDate()} de 
            ${i(o.toLocaleString("es-AR",{month:"long"}))} de 
            ${o.getFullYear()}`),a==="en"&&(f=`
            ${i(h.title)} since 
            ${i(o.toLocaleString("en-US",{month:"long"}))} 
            ${o.getDate()}, ${o.getFullYear()}
        `),f}const ee="/app";function xe(){var S;const m=Number(R().id),[x,h]=d.useState(""),[N,i]=d.useState(!1),[f,o]=d.useState(0),[a,b]=d.useState(y),[l,A]=d.useState({id:0,name:"",title:"",subtitle:"",message:e.jsx("span",{})}),g=$();d.useEffect(()=>{C.findOne(m).then(s=>{s.id&&b(s),s.statusCode>399&&r({title:s.statusCode,description:s.message,variant:"destructive",duration:5e3}),s instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+s.message,variant:"destructive",duration:5e3})})},[m,g,f]);async function E(s){C.removeSoft(s).then(t=>{t.statusCode===200&&(o(Math.random()),r({title:t.statusCode,description:t.message,variant:"success",duration:5e3})),t.statusCode>399&&r({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3}),i(!1)})}function U(s){C.remove(s).then(t=>{t.statusCode===200&&(g(-1),r({title:t.statusCode,description:t.message,variant:"success",duration:5e3})),t.statusCode>399&&r({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3}),i(!1)})}async function I(s){C.restore(s).then(t=>{t.statusCode===200&&(o(Math.random()),r({title:t.statusCode,description:t.message,variant:"success",duration:5e3})),t.statusCode>399&&r({title:t.statusCode,description:t.message,variant:"destructive",duration:5e3}),t instanceof Error&&r({title:"Error",description:"500 Internal Server Error | "+t.message,variant:"destructive",duration:5e3}),i(!1)})}function w(s,t){let v=!1,j="";t==="removeSoft"&&(j=c.dialog.possibleRevertion,v=e.jsxs("div",{className:"flex flex-col",children:[c.dialog.userSoftDelete,e.jsx("span",{className:"text-md font-bold text-slate-900",children:s.name})]})),t==="remove"&&(j=c.dialog.impossibleRevertion,v=e.jsxs("div",{className:"flex flex-col",children:[c.dialog.userDelete,e.jsx("span",{className:"text-md font-bold text-slate-900",children:s.name})]})),t==="restore"&&(j=c.dialog.possibleRevertion,v=e.jsxs("div",{className:"flex flex-col",children:[c.dialog.userRestore,e.jsx("span",{className:"text-md font-bold text-slate-900",children:s.name})]})),i(!0),A({id:Number(s.id),name:s.name,title:c.dialog.title,subtitle:j,message:v}),h(t)}return e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"mx-6 mb-4 mt-6 flex flex-row items-center justify-end",children:e.jsxs(n,{onClick:()=>g(-1),variant:"ghost",size:"sm",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),u.actions.back]})}),e.jsx("div",{className:"mt-8 flex min-w-80 flex-col items-center px-6",children:e.jsxs(B,{className:"mb-8 min-w-[350px] dark:border-[#2e2e2e] dark:bg-[#292a2d] md:w-[500px]",children:[e.jsx(L,{className:"mx-0 px-0",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(z,{role:a.role,text:(S=a.role)==null?void 0:S.charAt(0).toUpperCase(),width:"90px",fontSize:"60px",margin:"-20px"}),e.jsx("div",{className:"mt-12 text-3xl font-bold",children:a.name}),e.jsx("div",{className:"mt-2 text-sm text-neutral-400",children:(a==null?void 0:a.role)==="admin"?"Administrador":"Usuario"}),e.jsxs("div",{className:"my-8 flex items-center gap-2 italic",children:[e.jsx(K,{className:"h-4 w-4"}),a.email]}),a.phone&&e.jsxs("div",{className:"mb-12 flex items-center gap-2 italic",children:[e.jsx(Q,{className:"h-4 w-4"}),a.phone]}),e.jsx("div",{className:"flex text-sm font-extralight text-neutral-500",children:Z(a.role,a.createdAt)})]})}),(p.getState().role===D.ADMIN||p.getState().userId===a.id)&&e.jsxs(M,{className:"justify-end gap-2 bg-slate-200/50 p-2",children:[a.deletedAt===null&&e.jsx(n,{onClick:()=>g(`${ee}/usuario/modificar/${a.id}`),variant:"ghost",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-emerald-500",children:e.jsx(X,{className:"h-4 w-4"})}),a.deletedAt===null?e.jsx(n,{onClick:()=>w(a,"removeSoft"),variant:"outline",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-rose-400",children:e.jsx(_,{className:"h-4 w-4"})}):e.jsx(n,{onClick:()=>w(a,"restore"),variant:"outline",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-emerald-400",children:e.jsx(G,{className:"h-4 w-4"})}),p.getState().role===D.ADMIN&&p.getState().userId!==a.id&&e.jsx(n,{onClick:()=>w(a,"remove"),variant:"outline",size:"miniIcon",className:"rounded-full border bg-white text-slate-400/70 shadow-sm hover:bg-white hover:text-rose-400",children:e.jsx(J,{className:"h-5 w-5",strokeWidth:"1.5"})})]})]})}),e.jsx(P,{open:N,onOpenChange:i,children:e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(T,{children:l.title}),e.jsx(Y,{children:l.subtitle})]}),e.jsx("section",{className:"text-sm font-normal",children:l.message}),e.jsx(q,{children:e.jsxs("div",{className:"mt-6 flex flex-row gap-4",children:[e.jsx(n,{variant:"ghost",onClick:()=>i(!1),children:u.actions.cancel}),x==="removeSoft"&&e.jsx(n,{variant:"delete",onClick:()=>E(l.id),children:u.actions.delete}),x==="restore"&&e.jsx(n,{variant:"default",onClick:()=>I(l.id),children:u.actions.restore}),x==="remove"&&e.jsx(n,{variant:"delete",onClick:()=>U(l.id),children:u.actions.delete})]})})]})})]})}export{xe as default};
